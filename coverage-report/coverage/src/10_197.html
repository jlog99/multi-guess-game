<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Development\microsoft\MultiGuess\MultiGuess\MultiplayerGuessingGame.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
namespace MultiGuess
{
    public class MultiplayerGuessingGame : IMultiplayerGuessingGame
    {
        private readonly IVocabularyChecker vocabularyChecker;
        private readonly List&lt;string&gt; originalWords;
        private readonly List&lt;char[]&gt; currentWords;
        private readonly Random? random;

        public MultiplayerGuessingGame(List&lt;string&gt; words)
        {
            vocabularyChecker = new VocabularyChecker();
            originalWords = words.ToList();
            currentWords = new List&lt;char[]&gt;();
            random = new Random();

            foreach (var word in originalWords)
            {
                var hiddenWord = new string(&#39;*&#39;, word.Length).ToCharArray();
                int revealIndex = random.Next(word.Length);
                hiddenWord[revealIndex] = word[revealIndex];
                currentWords.Add(hiddenWord);
            }
        }

        public IList&lt;string&gt; GetGameStrings()
        {
            return currentWords.Select(x =&gt; new string(x)).ToList();
        }

        public int SubmitGuess(string playerName, string submission)
        {
            if (!vocabularyChecker.Exists(submission) || submission.Length != originalWords[0].Length)
            {
                return 0;
            }

            bool exactMatch = false;
            int score = 0;

            for (int i = 0; i &lt; originalWords.Count; i++)
            {
                if (new string(currentWords[i]) == originalWords[i])
                {
                    continue; // Skip fully revealed words
                }

                if (originalWords[i] == submission)
                {
                    exactMatch = true;
                    score = 10;
                    break;
                }

                bool validGuess = true;
                for (int j = 0; j &lt; submission.Length; j++)
                {
                    if (currentWords[i][j] != &#39;*&#39; &amp;&amp; currentWords[i][j] != submission[j])
                    {
                        validGuess = false;
                        break;
                    }
                }

                if (validGuess)
                {
                    for (int j = 0; j &lt; submission.Length; j++)
                    {
                        if (originalWords[i][j] == submission[j] &amp;&amp; currentWords[i][j] == &#39;*&#39;)
                        {
                            currentWords[i][j] = submission[j];
                            score++;
                        }
                    }
                }
            }

            if (exactMatch)
            {
                for (int i = 0; i &lt; originalWords.Count; i++)
                {
                    if (originalWords[i] == submission)
                    {
                        currentWords[i] = originalWords[i].ToCharArray();
                    }
                }
            }

            return score;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[10,9,10,59,1],[11,9,11,10,1],[12,13,12,57,1],[13,13,13,44,1],[14,13,14,47,1],[15,13,15,35,1],[17,13,17,20,1],[17,22,17,30,1],[17,31,17,33,1],[17,34,17,47,1],[18,13,18,14,1],[19,17,19,77,1],[20,17,20,60,1],[21,17,21,61,1],[22,17,22,46,1],[23,13,23,14,1],[24,9,24,10,1],[27,9,27,10,1],[28,13,28,45,1],[28,45,28,58,1],[28,58,28,69,1],[29,9,29,10,1],[32,9,32,10,1],[33,13,33,103,1],[34,13,34,14,1],[35,17,35,26,1],[38,13,38,37,1],[39,13,39,27,1],[41,18,41,27,1],[41,29,41,52,1],[41,54,41,57,1],[42,13,42,14,1],[43,17,43,69,1],[44,17,44,18,0],[45,21,45,30,0],[48,17,48,52,1],[49,17,49,18,1],[50,21,50,39,1],[51,21,51,32,1],[52,21,52,27,1],[55,17,55,40,1],[56,22,56,31,1],[56,33,56,54,1],[56,56,56,59,1],[57,17,57,18,1],[58,21,58,90,1],[59,21,59,22,1],[60,25,60,44,1],[61,25,61,31,1],[63,17,63,18,1],[65,17,65,32,1],[66,17,66,18,1],[67,26,67,35,1],[67,37,67,58,1],[67,60,67,63,1],[68,21,68,22,1],[69,25,69,95,1],[70,25,70,26,1],[71,29,71,64,1],[72,29,72,37,1],[73,25,73,26,1],[74,21,74,22,1],[75,17,75,18,1],[76,13,76,14,1],[78,13,78,28,1],[79,13,79,14,1],[80,22,80,31,1],[80,33,80,56,1],[80,58,80,61,1],[81,17,81,18,1],[82,21,82,56,1],[83,21,83,22,1],[84,25,84,74,1],[85,21,85,22,1],[86,17,86,18,1],[87,13,87,14,1],[89,13,89,26,1],[90,9,90,10,1]]);
    </script>
  </body>
</html>